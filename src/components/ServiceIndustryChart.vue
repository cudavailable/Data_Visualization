<template>
  <div class = "right_part">
    <h2 class="map-title">酒店数量与GDP关系</h2>
    <!-- 气泡图容器 -->
    <div ref="chartDom" style="width: 100%; height: 420px;" class = "myImage"></div>
    <!-- 按钮组 -->
    <div class = "button_group">
      <button 
        @click="switchChart(0)" 
        :class="{ active: currentChart === 0 }">
        2000年
      </button>
      <button 
        @click="switchChart(1)" 
        :class="{ active: currentChart === 1 }">
        2010年
      </button>
      <button 
        @click="switchChart(2)" 
        :class="{ active: currentChart === 2 }">
        2020年
      </button>
    </div>
  </div>
</template>

<script>
import { ref, onMounted } from 'vue';
import * as echarts from 'echarts';

export default {
  setup() {
    // 定义当前显示的图表索引
    const currentChart = ref(0);

    // 定义ECharts实例
    const chartDom = ref(null);
    let chartInstance = null;

    // 定义三个不同的气泡图配置
    const chartsOptions = 
    [
      {
  tooltip:
  {
    trigger:'item',
    formatter:function(params)
    {
      return `${params.value[3]}<br>酒店数量:${params.value[2]}家\n<br>GDP:${params.value[4]}亿元`;
    }
  },
  legend: 
  {
    show: true,
    data: ['GDP','酒店数量'],
    left: 40,
    top: 20,
  },
  xAxis: 
  {
    scale: true,
  },
  yAxis: 
  {
    scale: true,
  },
  series: 
  [
    {
      name:'GDP',
      type: 'scatter',
      symbolSize: (data) => {return Math.sqrt(data[4]/15)},
      data:[[130, 31.28 ,164,'上海',4812.2], [116.40, 45,328,'北京',3277.8],[120,42,43,'天津',1591.7],
        [98,25,83,'重庆',1822.1],[108,48,74,'内蒙古自治区',1539.1],[100,15,137,'广西壮族自治区',2080.0],
        [85,31.76,15,'西藏自治区',117.8],[100,41,27,'宁夏回族自治区',295.0],[84.61,42.89,27,'新疆维吾尔自治区',1363.6],
        [112,39.44,234,'河北',4628.2],[105,40,152,'山西',1845.7],[127,48,36,'吉林',1751.4],
        [124,44,136,'辽宁',4669.1],[130,50,80,'黑龙江',2855.5],[100,35,97,'陕西',1804.0],
        [90,40,92,'甘肃',1052.9],[87,35.62,13,'青海',263.7],[118.01,36.37,332,'山东',8278.1],
        [121,20,168,'福建',3764.5],[126,25,369,'浙江',6164.8],[112,31,175,'河南',5053.0],
        [106,29,122,'湖北',3545.4],[105,21,102,'湖南',3551.5],[115,24,67,'江西',2003.1],
        [125,34,323,'江苏',8553.7],[119,28,135,'安徽',3125.3],[114.98,15,515,'广东',10810.2],
        [109,12,49,'海南',526.8],[90,25,300,'四川',3928.2],[95,18,28,'贵州',1029.9],
        [90,15,182,'云南',2030.1]],
      itemStyle: {
          color: '#6495ED' // 修改为淡蓝色
        },
    },      
    {
      name:'酒店数量',
      type: 'scatter',
      symbolSize: (data) => {return Math.sqrt(data[2]/8)},
      data:[[130, 31.28 ,164,'上海',4812.2], [116.40, 45,328,'北京',3277.8],[120,42,43,'天津',1591.7],
        [98,25,83,'重庆',1822.1],[108,48,74,'内蒙古自治区',1539.1],[100,15,137,'广西壮族自治区',2080.0],
        [85,31.76,15,'西藏自治区',117.8],[100,41,27,'宁夏回族自治区',295.0],[84.61,42.89,27,'新疆维吾尔自治区',1363.6],
        [112,39.44,234,'河北',4628.2],[105,40,152,'山西',1845.7],[127,48,36,'吉林',1751.4],
        [124,44,136,'辽宁',4669.1],[130,50,80,'黑龙江',2855.5],[100,35,97,'陕西',1804.0],
        [90,40,92,'甘肃',1052.9],[87,35.62,13,'青海',263.7],[118.01,36.37,332,'山东',8278.1],
        [121,20,168,'福建',3764.5],[126,25,369,'浙江',6164.8],[112,31,175,'河南',5053.0],
        [106,29,122,'湖北',3545.4],[105,21,102,'湖南',3551.5],[115,24,67,'江西',2003.1],
        [125,34,323,'江苏',8553.7],[119,28,135,'安徽',3125.3],[114.98,15,515,'广东',10810.2],
        [109,12,49,'海南',526.8],[90,25,300,'四川',3928.2],[95,18,28,'贵州',1029.9],
        [90,15,182,'云南',2030.1]],
      itemStyle: {
          color: '#90EE90' // 修改为淡绿色
        },
    },             
  ]
  },
{
  tooltip:
  {
    trigger:'item',
    formatter:function(params)
    {
      return `${params.value[3]}<br>酒店数量:${params.value[2]}家\n<br>GDP:${params.value[4]}亿元`;
    }
  },
    legend: 
  {
    show: true,
    data: ['GDP','酒店数量'],
    left: 40,
    top: 20,
  },
  xAxis: 
  {
    scale: true,
  },
  yAxis: 
  {
    scale: true,
  },
  series: 
  [
    {
      name:'GDP',
      type: 'scatter',
      symbolSize: (data) => {return Math.sqrt(data[4]/15)},
      
      data:[[130, 31.28 ,1409,'上海',17915.4], [116.40, 45,1943,'北京',14964.0],[120,42,392,'天津',6830.8],
        [98,25,1037,'重庆',8065.3],[108,48,994,'内蒙古自治区',8199.9],[100,15,1323,'广西壮族自治区',8552.4],
        [85,31.76,184,'西藏自治区',512.9],[100,41,238,'宁夏回族自治区',1571.7],[84.61,42.89,679,'新疆维吾尔自治区',5360.2],
        [112,39.44,1893,'河北',18003.6],[105,40,1108,'山西',8903.99],[127,48,517,'吉林',6410.5],
        [124,44,1327,'辽宁',13896.3],[130,50,781,'黑龙江',8308.3],[100,35,1017,'陕西',9845.2],
        [90,40,537,'甘肃',3943.7],[87,35.62,209,'青海',1144.2],[118.01,36.37,3743,'山东',33922.5],
        [121,20,1580,'福建',15002.5],[126,25,3291,'浙江',27399.9],[112,31,1507,'河南',22655.0],
        [106,29,1892,'湖北',16226.9],[105,21,1559,'湖南',15574.3],[115,24,1178,'江西',9383.2],
        [125,34,3558,'江苏',41383.9],[119,28,1813,'安徽',13249.8],[114.98,15,4640,'广东',45944.6],
        [109,12,427,'海南',2020.5],[90,25,3446,'四川',17224.8],[95,18,619,'贵州',4519.0],
        [90,15,1616,'云南',7735.3]],
      itemStyle: {
          color: '#6495ED' // 修改为淡蓝色
        },
    },      
    {
      name:'酒店数量',
      type: 'scatter',
      symbolSize: (data) => {return Math.sqrt(data[2]/8)},
      data:[[130, 31.28 ,1409,'上海',17915.4], [116.40, 45,1943,'北京',14964.0],[120,42,392,'天津',6830.8],
        [98,25,1037,'重庆',8065.3],[108,48,994,'内蒙古自治区',8199.9],[100,15,1323,'广西壮族自治区',8552.4],
        [85,31.76,184,'西藏自治区',512.9],[100,41,238,'宁夏回族自治区',1571.7],[84.61,42.89,679,'新疆维吾尔自治区',5360.2],
        [112,39.44,1893,'河北',18003.6],[105,40,1108,'山西',8903.99],[127,48,517,'吉林',6410.5],
        [124,44,1327,'辽宁',13896.3],[130,50,781,'黑龙江',8308.3],[100,35,1017,'陕西',9845.2],
        [90,40,537,'甘肃',3943.7],[87,35.62,209,'青海',1144.2],[118.01,36.37,3743,'山东',33922.5],
        [121,20,1580,'福建',15002.5],[126,25,3291,'浙江',27399.9],[112,31,1507,'河南',22655.0],
        [106,29,1892,'湖北',16226.9],[105,21,1559,'湖南',15574.3],[115,24,1178,'江西',9383.2],
        [125,34,3558,'江苏',41383.9],[119,28,1813,'安徽',13249.8],[114.98,15,4640,'广东',45944.6],
        [109,12,427,'海南',2020.5],[90,25,3446,'四川',17224.8],[95,18,619,'贵州',4519.0],
        [90,15,1616,'云南',7735.3]],
      itemStyle: {
          color: '#90EE90' // 修改为淡绿色
        },
    },    
  ] 
},
{
  tooltip:
  {
    trigger:'item',
    formatter:function(params)
    {
      return `${params.value[3]}<br>酒店数量:${params.value[2]}家\n<br>GDP:${params.value[4]}亿元`;
    }
  },
    legend: 
  {
    show: true,
    data: ['GDP','酒店数量'],
    left: 40,
    top: 20,
  },
  xAxis: 
  {
    scale: true,
  },
  yAxis: 
  {
    scale: true,
  },
  series: 
  [
    {
      name:'GDP',
      type: 'scatter',
      symbolSize: (data) => {return Math.sqrt(data[4]/15)},
      
      data:[[130, 31.28 ,10071,'上海',38963.3], [116.40, 45,11395,'北京',35943.3],[120,42,4039,'天津',14008.0],
        [98,25,14308,'重庆',25041.4],[108,48,10169,'内蒙古自治区',17258.0],[100,15,16309,'广西壮族自治区',22120.9],
        [85,31.76,2357,'西藏自治区',1902.7],[100,41,2321,'宁夏回族自治区',3956.3],[84.61,42.89,5516,'新疆维吾尔自治区',13800.7],
        [112,39.44,21719,'河北',36013.8],[105,40,12548,'山西',17835.6],[127,48,6802,'吉林',12256.0],
        [124,44,16220,'辽宁',25011.4],[130,50,10330,'黑龙江',13633.4],[100,35,18086,'陕西',26014.1],
        [90,40,7996,'甘肃',8979.7],[87,35.62,4596,'青海',3009.8],[118.01,36.37,29920,'山东',72798.2],
        [121,20,13215,'福建',43608.6],[126,25,33345,'浙江',64689.1],[112,31,22822,'河南',54259.4],
        [106,29,21810,'湖北',43004.5],[105,21,21079,'湖南',41542.6],[115,24,11678,'江西',25782.0],
        [125,34,29086,'江苏',102807.7],[119,28,18229,'安徽',38061.5],[114.98,15,42281,'广东',111151.6],
        [109,12,5776,'海南',5566.2],[90,25,32769,'四川',48501.6],[95,18,13413,'贵州',17860.4],
        [90,15,26316,'云南',24555.7]],
      itemStyle: {
          color: '#6495ED' // 修改为淡蓝色
        },
    },      
    {
      name:'酒店数量',
      type: 'scatter',
      symbolSize: (data) => {return Math.sqrt(data[2]/8)},
      data:[[130, 31.28 ,10071,'上海',38963.3], [116.40, 45,11395,'北京',35943.3],[120,42,4039,'天津',14008.0],
        [98,25,14308,'重庆',25041.4],[108,48,10169,'内蒙古自治区',17258.0],[100,15,16309,'广西壮族自治区',22120.9],
        [85,31.76,2357,'西藏自治区',1902.7],[100,41,2321,'宁夏回族自治区',3956.3],[84.61,42.89,5516,'新疆维吾尔自治区',13800.7],
        [112,39.44,21719,'河北',36013.8],[105,40,12548,'山西',17835.6],[127,48,6802,'吉林',12256.0],
        [124,44,16220,'辽宁',25011.4],[130,50,10330,'黑龙江',13633.4],[100,35,18086,'陕西',26014.1],
        [90,40,7996,'甘肃',8979.7],[87,35.62,4596,'青海',3009.8],[118.01,36.37,29920,'山东',72798.2],
        [121,20,13215,'福建',43608.6],[126,25,33345,'浙江',64689.1],[112,31,22822,'河南',54259.4],
        [106,29,21810,'湖北',43004.5],[105,21,21079,'湖南',41542.6],[115,24,11678,'江西',25782.0],
        [125,34.04,29086,'江苏',102807.7],[119,28,18229,'安徽',38061.5],[114.98,15,42281,'广东',111151.6],
        [109,12,5776,'海南',5566.2],[90,25,32769,'四川',48501.6],[95,18,13413,'贵州',17860.4],
        [90,15,26316,'云南',24555.7]],
      itemStyle: {
          color: '#90EE90' // 修改为淡绿色
        },
    }           
  ]
}
    ];

    const switchChart = (index) => {
      currentChart.value = index;
      chartInstance.setOption(chartsOptions[index]);
    };

    onMounted(() => {
      // 初始化ECharts实例
      chartInstance = echarts.init(chartDom.value);
      // 设置初始图表
      chartInstance.setOption(chartsOptions[currentChart.value]);
      chartInstance.resize();
    });

    return {
      currentChart,
      switchChart,
      chartDom,
    };
  }
};
</script>

<style>

/* 按钮基础样式 */
button {
  margin: 1px 70px;
  padding: 8px 13px;
  cursor: pointer;
  border: none; /* 去除边框 */
  border-radius: 5px; /* 圆角边框 */
  color: white; /* 文字颜色 */
  font-weight: bold; /* 字体加粗 */
  transition: background 0.3s ease; /* 渐变动画效果 */
}

/* 气泡图1按钮样式 */
button:nth-child(1) {
  background-image: linear-gradient(to right, #89f7fe, #66a6ff);
}

/* 气泡图2按钮样式 */
button:nth-child(2) {
  background-image: linear-gradient(to right, #66a6ff, #4f8ef7);
}

/* 气泡图3按钮样式 */
button:nth-child(3) {
  background-image: linear-gradient(to right, #4f8ef7, #3872e8);
}

/* 按钮悬浮时的样式 */
button:hover {
  filter: brightness(1.1); /* 增加亮度 */
}

/* 按钮激活时的样式 */
button:active {
  filter: brightness(0.9); /* 降低亮度 */
}

/* 按钮激活状态的样式 */
button.active {
  filter: brightness(0.9); /* 降低亮度 */
}

.button_group{
  margin: 1px;
}
.myImage{
  width: 100%;
  height: 100%;
  padding: 0px; /* 给容器增加内边距，让内容不贴近边缘 */
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-grow: 1;
}
.map-title {
  height: 5px;
  margin: 20px;
  font-size: 24px; /* 标题字体大小 */
  font-weight: bold;
  color: #333; /* 标题颜色 */
  margin-bottom: 1px; /* 标题与地图之间的距离 */
  text-align: center;
}
div {
  width: 100%;
  height: 100%;
}
</style>